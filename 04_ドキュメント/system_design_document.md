# 宅地建物取引士試験 質問プロンプトシステム設計書

## 1. 目的と目標

本システムは、宅地建物取引士試験の合格を目指す学習者に対し、間隔反復学習理論と認知負荷理論に基づいた効率的かつ継続的な学習習慣を提供することを目的とします。既存のPWAアプリと連携し、毎日決まった時間に試験範囲から質問を出題することで、知識の定着と実戦力の向上を図り、最終的な試験合格を確実にするための支援を行います。

## 2. 学習理論の採用

### 2.1. 間隔反復学習理論 (Spaced Repetition Theory)

**概要:**
ドイツの心理学者ヘルマン・エビングハウスが提唱した「忘却曲線」に基づき、学習した内容を忘却し始める最適なタイミングで復習を繰り返すことで、記憶の長期定着を促す学習法です。復習の間隔を徐々に広げていくことで、効率的に知識を維持・強化します。

**本システムでの適用:**
*   **復習スケジュールの最適化:** 質問の出題間隔を、学習者の解答履歴や正答率に基づいて動的に調整します。正答した問題は復習間隔を長くし、誤答した問題は短くすることで、忘れそうになるタイミングでの復習を実現します。
*   **段階的な難易度調整:** 初めて出題する問題や、以前に誤答した問題は、より短い間隔で再出題し、記憶の定着を促します。
*   **時間帯別学習フェーズとの連携:** 朝の基礎固め、昼の理解深化、夜の実戦演習という各フェーズにおいて、間隔反復の原則に基づいた問題選定を行います。

### 2.2. 認知負荷理論 (Cognitive Load Theory)

**概要:**
オーストラリアの教育心理学者ジョン・スウィラーによって提唱された理論で、人間のワーキングメモリ（作業記憶）の容量が限られているという前提に基づいています。学習における認知負荷を「内的認知負荷（Intrinsic Cognitive Load）」「外的認知負荷（Extraneous Cognitive Load）」「生成認知負荷（Germane Cognitive Load）」の3つに分類し、学習効果を最大化するためには、不必要な認知負荷（外的認知負荷）を減らし、学習に直接関連する認知負荷（生成認知負荷）を高めることが重要であるとします。

**本システムでの適用:**
*   **外的認知負荷の軽減:**
    *   **明確なプロンプト構造:** 質問プロンプトは、時間帯表示、学習フェーズ、具体的な学習テーマを明確に提示し、学習者が何に集中すべきかを一目で理解できるようにします。余計な情報や装飾を排除し、問題文と解答のポイントに集中できるデザインとします。
    *   **一貫したフォーマット:** 問題形式、解答のポイント、学習アドバイス、記憶定着のコツなど、プロンプトの各要素のフォーマットを統一することで、学習者が情報処理に費やす労力を削減します。
    *   **プッシュ通知の最適化:** 通知内容は簡潔にし、学習開始への障壁を低くします。
*   **内的認知負荷の管理:**
    *   **段階的な難易度:** 学習者の習熟度に合わせて問題の難易度を調整し、常に適切な挑戦レベルを提供します。これにより、簡単すぎて退屈になったり、難しすぎて挫折したりするのを防ぎます。
    *   **科目別アプローチ:** 各科目の特性（権利関係は概念理解、宅建業法は数値暗記など）に応じた問題作成と解説を提供し、学習者が効果的に知識を構造化できるよう支援します。
*   **生成認知負荷の促進:**
    *   **解答のポイントと学習アドバイス:** 問題の解答だけでなく、その背景にある知識や関連法規、思考プロセスを解説することで、学習者が深い理解を構築し、知識を応用する能力を養います。
    *   **記憶定着のためのコツ:** メタ認知を促すヒントを提供し、学習者自身が効果的な学習戦略を立てられるように支援します。
    *   **実戦演習:** 応用問題や複合問題を通じて、学習者が知識を統合し、問題解決に活用する機会を提供します。

## 3. システムの全体像

本システムは、以下の主要コンポーネントで構成されます。

1.  **質問生成・選択エンジン:** 学習理論に基づき、学習者の進捗状況や時間帯に応じた最適な質問を選択・生成します。
2.  **質問データベース:** 宅建試験の全範囲を網羅し、科目別、時間帯別、難易度別に分類された質問と解答、解説を格納します。
3.  **学習進捗管理モジュール:** 学習者の解答履歴、正答率、学習時間などを記録・分析し、適応的問題選択アルゴリズムにフィードバックします。
4.  **プッシュ通知サービス:** 毎日決まった時間に、学習リマインドと質問プロンプトを学習者のデバイスに送信します。
5.  **PWAアプリ連携モジュール:** 既存のPWAアプリと連携し、質問の表示、解答の入力、学習進捗の同期を行います。

## 4. 実装要件

### 4.1. 既存PWAアプリとの連携

*   既存のPWAアプリ（`https://lkebcslv.manus.space/`）のAPIまたはデータ構造を分析し、質問プロンプトの表示、解答の送信、学習進捗の同期が可能なインターフェースを設計します。
*   OAuth2.0などの認証プロトコルを用いて、セキュアな連携を実現します。

### 4.2. プッシュ通知による学習リマインド

*   Web Push APIまたはFirebase Cloud Messaging (FCM) などの技術を利用し、学習者のデバイスにプッシュ通知を送信する機能を実装します。
*   通知は毎日10:00、15:00、19:00に設定された質問プロンプトの配信と連動させます。

### 4.3. 学習進捗の記録と分析

*   学習者の解答データ（問題ID、解答、正誤、解答時間など）をデータベースに記録します。
*   記録されたデータを基に、科目別、時間帯別、難易度別の正答率、学習時間、進捗状況などを分析し、学習者にフィードバックを提供します。

### 4.4. 適応的問題選択アルゴリズムの実装

*   間隔反復学習理論に基づき、学習者の現在の知識レベル、過去の解答履歴、忘却曲線などを考慮して、次に提示すべき最適な問題を動的に選択するアルゴリズムを開発します。
*   具体的には、SuperMemoアルゴリズム（SM-2など）を参考に、問題の「E-Factor（Easiness Factor）」を更新し、次回の復習間隔を決定します。

## 5. 質問プロンプトの構造

各質問プロンプトは以下の要素で構成されます。

*   **時間帯表示と学習フェーズの明示:** 例：「【朝：10:00】基礎固めフェーズ」
*   **具体的な学習テーマの提示:** 例：「権利関係：意思表示（錯誤）」
*   **四肢択一形式の問題:** 宅建試験の形式に合わせた問題文と選択肢。
*   **解答のポイントと学習アドバイス:** 正解の解説、関連する法律条文、重要事項、学習上の注意点など。
*   **記憶定着のためのコツ:** 語呂合わせ、図解の推奨、関連知識との紐付けなど、記憶を助けるヒント。

## 6. 科目別アプローチ

### 6.1. 権利関係（民法等）

*   **学習戦略:** 概念理解と体系的学習を重視します。個別の条文だけでなく、その背景にある法原則や判例の趣旨を深く理解させる問題と解説を提供します。
*   **問題例:** 具体的な事例問題を通じて、民法の各原則（意思表示、代理、時効など）の適用を問う。

### 6.2. 宅建業法

*   **学習戦略:** 数値暗記と手続き理解に重点を置きます。正確な数字や期間、手続きの流れを問う問題を中心に構成します。
*   **問題例:** 宅地建物取引士の設置義務、重要事項説明の項目、免許の更新期間など、具体的な数値や手続きを問う。

### 6.3. 法令上の制限

*   **学習戦略:** 用語定義と制限内容の理解を深めます。都市計画法、建築基準法などの主要な法律における規制内容や許可・届出の要否を問う問題を提供します。
*   **問題例:** 用途地域ごとの建築制限、建ぺい率・容積率の計算、開発許可の対象など。

### 6.4. 税・その他

*   **学習戦略:** 計算方法と特例制度の把握を促します。不動産取得税、固定資産税、譲渡所得税などの計算問題や、特例の適用条件を問う問題を含めます。
*   **問題例:** 不動産売買における税額計算、住宅ローン控除の適用条件、地価公示法・不動産鑑定評価基準に関する問題。

## 7. 成果物

*   システム設計書（本ドキュメント）
*   質問データベース（科目別・時間帯別・難易度別）
*   実装ガイド（アプリ連携方法と技術仕様）

---



## 8. 宅建試験の科目別分析と問題データベース設計

宅建試験は以下の4科目から構成され、合計50問が出題されます。各科目の出題傾向と重要論点を分析し、問題データベースの設計に反映させます。

### 8.1. 科目別出題傾向と重要論点

#### 8.1.1. 権利関係（民法等）
*   **出題数:** 14問程度
*   **特徴:** 民法、借地借家法、区分所有法、不動産登記法など。概念理解と体系的学習が重要。事例問題が多く、条文の知識だけでなく、その適用を問われる。
*   **重要論点:**
    *   **民法:** 意思表示（錯誤、詐欺、強迫）、代理、時効、物権変動、担保物権（抵当権）、債権総論、契約（売買、賃貸借）、不法行為、相続
    *   **借地借家法:** 借地権・借家権の対抗力、更新、期間、増改築、正当事由
    *   **区分所有法:** 共用部分、専有部分、管理組合、集会決議
    *   **不動産登記法:** 登記の効力、登記の種類

#### 8.1.2. 宅建業法
*   **出題数:** 20問程度
*   **特徴:** 宅建試験の最重要科目であり、得点源となる。数値暗記と手続きの正確な理解が求められる。毎年ほぼ同じ論点から出題される傾向が強い。
*   **重要論点:**
    *   宅地建物取引業の免許
    *   宅地建物取引士（設置義務、登録、証票、重要事項説明）
    *   営業保証金、弁済業務保証金
    *   重要事項説明（35条書面）
    *   契約書面（37条書面）
    *   自ら売主制限（8種制限）
    *   広告規制
    *   報酬額の制限
    *   クーリング・オフ
    *   監督処分、罰則

#### 8.1.3. 法令上の制限
*   **出題数:** 8問程度
*   **特徴:** 都市計画法、建築基準法が中心。用語の定義と制限内容の理解が重要。図やイラストを用いた問題も出題される。
*   **重要論点:**
    *   **都市計画法:** 都市計画区域、用途地域、開発許可、建築行為の制限
    *   **建築基準法:** 単体規定、集団規定（建ぺい率、容積率、高さ制限）、建築確認、道路
    *   国土利用計画法、農地法、宅地造成等規制法、土地区画整理法、景観法、文化財保護法など

#### 8.1.4. 税・その他
*   **出題数:** 8問程度
*   **特徴:** 不動産に関する税金、地価公示法、不動産鑑定評価基準、統計、住宅金融支援機構など。計算問題や特例制度の理解が問われる。
*   **重要論点:**
    *   **税法:** 不動産取得税、固定資産税、印紙税、登録免許税、所得税（譲渡所得）、贈与税、相続税
    *   地価公示法、不動産鑑定評価基準
    *   土地・建物の統計
    *   住宅金融支援機構法
    *   不当景品類及び不当表示防止法（景表法）
    *   土地・建物の構造、設備

### 8.2. 問題データベースのスキーマ設計

問題データベースは、以下のフィールドを持つ構造とします。

*   **`question_id` (Primary Key):** 問題を一意に識別するID。
*   **`subject` (String):** 科目名（例: '権利関係', '宅建業法', '法令上の制限', '税・その他'）。
*   **`topic` (String):** 具体的な学習テーマ（例: '意思表示（錯誤）', '重要事項説明', '用途地域'）。
*   **`difficulty` (Integer):** 問題の難易度（1:易しい ～ 5:難しい）。適応的問題選択アルゴリズムの初期値として使用。
*   **`time_slot` (String):** 出題推奨時間帯（例: 'morning', 'noon', 'evening'）。
*   **`question_text` (Text):** 四肢択一形式の問題文。
*   **`choice_1` (Text):** 選択肢1。
*   **`choice_2` (Text):** 選択肢2。
*   **`choice_3` (Text):** 選択肢3。
*   **`choice_4` (Text):** 選択肢4。
*   **`correct_answer` (Integer):** 正解の選択肢番号（1～4）。
*   **`explanation` (Text):** 解答のポイントと学習アドバイス。正解の解説、関連する法律条文、重要事項、学習上の注意点などを含む。
*   **`memory_tip` (Text):** 記憶定着のためのコツ。語呂合わせ、図解の推奨、関連知識との紐付けなど。
*   **`e_factor` (Float):** 間隔反復学習における問題の難易度係数（初期値2.5）。
*   **`repetitions` (Integer):** 正答した回数（初期値0）。
*   **`next_review_date` (Date):** 次回復習すべき日付。



## 9. 既存PWAアプリの分析と連携仕様設計

### 9.1. PWAアプリの現状分析

`https://lkebcslv.manus.space/` にアクセスし、アプリの構造と機能を分析しました。

*   **学習時間帯とフェーズ:** アプリは「朝の学習 10:00 - 基礎固め」、「昼の学習 15:00 - 理解深化」、「夜の学習 19:00 - 実戦演習」という3つの明確なセクションを持っており、これは本システムの学習戦略と完全に一致しています。
*   **動的コンテンツ:** 「学習プロンプトを準備しています」という表示から、質問コンテンツが動的にロードされる仕組みになっていると推測されます。
*   **学習進捗の表示:** 「学習進度」セクションには「総問題数」と「正解数」が表示されており、学習履歴や正答率を記録・表示する機能が既に存在することが示唆されます。これは、本システムで計画している学習進捗管理モジュールと連携する上で非常に有利です。

### 9.2. 連携仕様設計の検討

既存のPWAアプリとの連携を考慮し、以下の仕様を設計します。

#### 9.2.1. 質問プロンプトの表示

*   **APIエンドポイント:** 本システムは、時間帯（morning, noon, evening）と学習者のIDをパラメータとして受け取り、対応する質問プロンプト（問題文、選択肢、解答のポイント、記憶定着のコツなど）をJSON形式で返すAPIエンドポイントを提供します。
*   **PWAアプリからの呼び出し:** PWAアプリは、各学習時間（10:00, 15:00, 19:00）になった際に、本システムのAPIエンドポイントを呼び出し、質問プロンプトを取得して表示します。

#### 9.2.2. 解答の入力と学習進捗の同期

*   **APIエンドポイント:** 本システムは、学習者の解答（`question_id`, `selected_choice`, `is_correct`, `time_taken`など）を受け取り、学習進捗データベースを更新するためのAPIエンドポイントを提供します。
*   **PWAアプリからの送信:** PWAアプリは、学習者が問題に解答した後、その解答データを本システムのAPIエンドポイントに送信します。
*   **学習進捗の更新:** 本システムは、受け取った解答データに基づいて、学習者の`e_factor`、`repetitions`、`next_review_date`を更新し、適応的問題選択アルゴリズムに反映させます。

#### 9.2.3. 認証とセキュリティ

*   **認証プロトコル:** PWAアプリと本システム間の通信には、OAuth2.0などの標準的な認証プロトコルを導入し、セキュアなデータ連携を保証します。
*   **APIキー:** 本システムのAPIエンドポイントへのアクセスには、APIキーによる認証を必須とします。

#### 9.2.4. データ構造の整合性

*   PWAアプリと本システム間でやり取りされるデータ（質問プロンプト、解答データ、学習進捗データなど）は、事前に定義されたJSONスキーマに準拠させ、データの一貫性と互換性を確保します。

### 9.3. 実装ガイドへの反映

これらの連携仕様は、最終的な「実装ガイド」に詳細なAPIドキュメントとして記述し、PWAアプリ開発者が容易に連携作業を行えるようにします。

---

