# 宅建BOOST 設計仕様書

## 1. はじめに

本ドキュメントは、宅地建物取引士試験合格を支援する質問プロンプトシステム「宅建BOOST」の設計仕様を定義するものです。ユーザーは毎日決まった時間に試験範囲から出題される質問に解答することで知識を深め、試験合格を確実にするための効率的かつ継続的な学習習慣を確立することを目的とします。

## 2. 目的と目標

- 毎日決まった時間（10:00、15:00、19:00）に試験範囲から質問を出題する。
- 解答を通して知識を深め、宅地建物取引士試験合格を確実にする。
- 既存のPWAアプリ（https://lkebcslv.manus.space/）を活用してテストを繰り返す。
- アプリ名は「宅建BOOST」とし、専用のアイコンとビジュアルデザインを作成する。

## 3. システム概要

「宅建BOOST」は、ユーザーの学習進捗と弱点分野に基づいてパーソナライズされた宅建試験問題を提供するPWA（Progressive Web App）連携システムです。バックエンドはFlaskで構築され、SQLiteデータベースに問題データとユーザーの学習データを管理します。フロントエンドは既存のPWAアプリを拡張し、プッシュ通知によるリマインド、時間帯別学習プログラム、適応的問題選択アルゴリズム、学習進度追跡、即時フィードバック機能を提供します。視覚的には、学習の加速・飛躍をイメージさせる3Dメタリックなアイコンとプロフェッショナルなデザインを採用します。

## 4. 機能要件

### 4.1. 時間帯別学習プログラム

- **朝（10:00）**: 基礎固め - 新しい知識の習得と基本概念の理解。5問、15-20分、難易度★☆☆。
- **昼（15:00）**: 理解深化 - 実務的な応用と知識の定着。7問、25-30分、難易度★★☆。
- **夜（19:00）**: 実戦演習 - 総合的な実戦力と応用力の向上。10問、35-40分、難易度★★★。

### 4.2. 質問プロンプトの構造

各質問プロンプトは以下の要素で構成されます。

- 時間帯表示と学習フェーズの明示
- 具体的な学習テーマの提示
- 四肢択一形式の問題
- 解答のポイントと学習アドバイス
- 記憶定着のためのコツ

### 4.3. 適応的問題選択アルゴリズム

- ユーザーの弱点分野を分析し、出題を調整する。
- 正答率の低い問題を優先的に出題する。
- 時間帯別の難易度調整（朝：易しめ、昼：標準、夜：難しめ）を行う。
- 週間・月間学習サイクルに基づき、出題バランスを調整する。

### 4.4. 出題範囲と問題数

- 宅建試験の全範囲をカバーする。
- 科目別の出題比率：権利関係（14問）、宅建業法（20問）、法令上の制限（8問）、税・その他（8問）。

### 4.5. 既存PWAアプリとの連携

- 既存のPWAアプリ（https://lkebcslv.manus.space/）とシームレスに連携し、学習機能を提供する。

### 4.6. プッシュ通知による学習リマインド

- 毎日10:00、15:00、19:00に学習開始を促すプッシュ通知を送信する。

### 4.7. 学習進度追跡機能

- ユーザーの解答履歴、正答率、学習時間などを記録し、進捗を可視化する。

### 4.8. 回答確認機能

- 問題解答後、即座に正誤判定と解説、記憶定着のコツを提供する。

## 5. 非機能要件

### 5.1. パフォーマンス

- 問題のロード時間、解答のフィードバックは迅速に行われること。
- プッシュ通知は指定時刻に正確に送信されること。

### 5.2. セキュリティ

- ユーザーデータおよび問題データの保護を確保すること。
- API通信はセキュアな方法で行われること。

### 5.3. スケーラビリティ

- 将来的なユーザー数増加に対応できるよう、システムは拡張性を持つこと。

### 5.4. 可用性

- システムは高い可用性を維持し、安定してサービスを提供できること。

## 6. アーキテクチャ設計

### 6.1. バックエンド

- **フレームワーク**: Flask
- **データベース**: SQLite (問題データ、ユーザー進捗データ、学習セッションデータ)
- **主要機能**: 問題提供API、学習進捗記録API、適応的問題選択アルゴリズム、プッシュ通知連携ロジック

### 6.2. フロントエンド

- **プラットフォーム**: 既存PWAアプリ（https://lkebcslv.manus.space/）
- **主要機能**: 問題表示、解答入力、フィードバック表示、学習進捗表示、プッシュ通知受信

## 7. データベース設計

### 7.1. 質問データベーススキーマ

| フィールド名       | データ型 | 説明                                     |
| :----------------- | :------- | :--------------------------------------- |
| `question_id`      | INTEGER  | 主キー、問題ID                           |
| `subject`          | TEXT     | 科目（権利関係、宅建業法など）           |
| `theme`            | TEXT     | 具体的な学習テーマ                       |
| `difficulty`       | INTEGER  | 難易度（1:易、2:中、3:難）               |
| `question_text`    | TEXT     | 問題文                                   |
| `choice1`          | TEXT     | 選択肢1                                  |
| `choice2`          | TEXT     | 選択肢2                                  |
| `choice3`          | TEXT     | 選択肢3                                  |
| `choice4`          | TEXT     | 選択肢4                                  |
| `correct_answer`   | INTEGER  | 正解の選択肢番号（1, 2, 3, 4）           |
| `explanation`      | TEXT     | 解答のポイントと学習アドバイス           |
| `retention_tips`   | TEXT     | 記憶定着のためのコツ                     |
| `morning_eligible` | BOOLEAN  | 朝の学習で出題可能か                     |
| `noon_eligible`    | BOOLEAN  | 昼の学習で出題可能か                     |
| `night_eligible`   | BOOLEAN  | 夜の学習で出題可能か                     |

### 7.2. ユーザー進捗データテーブルスキーマ

| フィールド名         | データ型 | 説明                                     |
| :------------------- | :------- | :--------------------------------------- |\n| `progress_id`        | INTEGER  | 主キー、進捗ID                           |
| `user_id`            | INTEGER  | ユーザーID                               |
| `question_id`        | INTEGER  | 問題ID                                   |
| `answered_choice`    | INTEGER  | ユーザーが選択した選択肢                 |
| `is_correct`         | BOOLEAN  | 正解したか否か                           |
| `answer_time`        | DATETIME | 解答日時                                 |
| `time_taken`         | INTEGER  | 解答にかかった時間（秒）                 |
| `learning_phase`     | TEXT     | 学習フェーズ（朝、昼、夜）               |

### 7.3. 学習セッション管理テーブルスキーマ

| フィールド名       | データ型 | 説明                                     |
| :----------------- | :------- | :--------------------------------------- |
| `session_id`       | INTEGER  | 主キー、セッションID                     |
| `user_id`          | INTEGER  | ユーザーID                               |
| `session_date`     | DATE     | セッション日付                           |
| `session_type`     | TEXT     | セッションタイプ（朝、昼、夜）           |
| `questions_asked`  | TEXT     | 出題された問題IDのリスト（JSON形式）     |
| `questions_correct`| TEXT     | 正解した問題IDのリスト（JSON形式）       |
| `total_time`       | INTEGER  | セッション合計時間（秒）                 |

## 8. API設計

### 8.1. 問題提供API

- **エンドポイント**: `/api/questions`
- **メソッド**: GET
- **パラメータ**: `user_id`, `time_of_day` (morning, noon, night)
- **レスポンス**: 指定された時間帯とユーザーの学習進捗に基づいた問題リスト（JSON形式）

### 8.2. 学習進捗記録API

- **エンドポイント**: `/api/progress`
- **メソッド**: POST
- **パラメータ**: `user_id`, `question_id`, `answered_choice`, `is_correct`, `time_taken`, `learning_phase`
- **レスポンス**: 記録成功のステータス（JSON形式）

### 8.3. プッシュ通知連携

- **エンドポイント**: `/api/register_push` (プッシュ通知登録)
- **メソッド**: POST
- **パラメータ**: `user_id`, `subscription_info` (プッシュ通知購読情報)
- **レスポンス**: 登録成功のステータス（JSON形式）

- **内部処理**: スケジュールされたタスク（cronジョブなど）により、指定時刻に登録されたユーザーにプッシュ通知を送信。

## 9. ビジュアルデザイン要件

- **アプリアイコン**: 3Dメタリックなデザイン。iOSおよびPCデスクトップにインストール後、適切に表示されること。学習の加速・飛躍をイメージさせる。
- **全体デザイン**: 信頼性と専門性を感じさせるプロフェッショナルな雰囲気。アプリ名「宅建BOOST」を強調し、ブランディング要素を組み込む。
- **ブランディング要素**: 学習の加速・飛躍をイメージさせるビジュアル要素（例: 矢印、ロケット、上昇グラフなど）。ユーザーのモチベーション維持を支援する達成感演出（例: 進捗バー、バッジ、ランキングなど）。

## 10. 学習戦略とサイクル

### 10.1. 科目別アプローチ

- **権利関係（民法等）**: 概念理解と体系的学習を重視。
- **宅建業法**: 数値暗記と手続き理解を重視。
- **法令上の制限**: 用語定義と制限内容の理解を重視。
- **税・その他**: 計算方法と特例制度の把握を重視。

### 10.2. 週間・月間学習サイクルの設計

- **週間テーマ設定**: 基礎固め週間、応用力強化週間、実戦力向上週間、総合仕上げ週間。
- **月間学習計画**: 基礎力養成期、応用力強化期、実戦力完成期、直前対策期。

## 11. バックエンド実装（Flask）

- Flaskアプリケーションのセットアップ。
- SQLiteデータベースの初期化と接続。
- 問題データ、ユーザー進捗データ、学習セッションデータのCRUD操作。
- 適応的問題選択アルゴリズムのロジック実装。
- APIエンドポイントの定義とハンドリング。
- 既存PWAアプリとの認証・連携メカニズムの検討。

## 12. 既存PWAアプリの機能理解

- 既存アプリの構造とAPI連携方法を詳細に分析し、シームレスな統合を実現する。
- 時間帯別学習システム、四肢択一問題形式、学習進度追跡機能、回答確認機能が既存アプリでどのように実装されているかを理解し、必要に応じて拡張・連携する。
